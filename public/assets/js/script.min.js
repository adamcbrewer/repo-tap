(function(e){e=e||{};e.socket.on("server msg",function(e){console.info(e.msg)});e.socket.on("all changesets",function(t){e.showCommits(t.results.commits)});e.socket.on("debug",function(e){console.dir(e)});e.socket.on("update stats",function(t){var n=this.commitStats||$("#stats"),r=t.results,i=n.find('[data-live="connected-users"]'),s=n.find('[data-live="total-commits"]'),o=n.find('[data-live="timeout"]'),u=n.find('[data-live="repos"]'),a=n.find('[data-live="repo-requests"]'),f=n.find('[data-live="uptime"]');r.clients&&i.fadeOut(200,function(){this.innerHTML=r.clients;i.fadeIn(200)});r.commits&&s.fadeOut(200,function(){this.innerHTML=r.commits;s.fadeIn(200)});r.timeout&&o.fadeOut(200,function(){this.innerHTML=r.timeout;e.initCountdown(o.fadeIn(200))});r.repos&&u.fadeOut(200,function(){this.innerHTML=r.repos;u.fadeIn(200)});r.requests&&a.fadeOut(200,function(){this.innerHTML=r.requests;a.fadeIn(200)})});e.showCommits=function(e){e=e||[];var t=e.length,n=this.commits.find(".commit").length,r=this;$.each(e,function(e,t){r.commits.prepend(t)})};e.initCountdown=function(e){this._cdTimeout&&clearInterval(this._cdTimeout);var t=parseInt(e.html(),10);this._cdTimeout=setInterval(function(){e.html(--t)},1e3)}})(App);$(function(){App.commits=$("#commits");App.commitStats=$("#stats");App.commits.on("click",'[data-action="toggle-details"]',function(e){e.preventDefault();var t=$(this).parents("[data-node]").find('[data-result="toggle-details"]');t.toggleClass("hidden")})});